h1. Morning Glory

Morning Glory is comprised of a rake task and helper methods that manages the deployment of static assets into an Amazon CloudFront CDN's S3 Bucket, improving the performance of static assets on your Rails web applications.

_NOTE: You will require an Amazon Web Services (AWS) account in order to use this gem. Specially: S3 for storing the files you wish to distribute, and CloudFront for CDN distribution of those files._

h2. What does it do?

Morning Glory provides an easy way to deploy Ruby on Rails application assets to the Amazon CloudFront CDN. 

It solves a number of common issues with S3/CloudFront. For instance, CloudFront won't automatically expire old assets stored on edge nodes when you redeploy new assets. 
To fix this Morning Glory will automatically namespace asset releases for you, then update all references to those renamed assets within your stylesheets ensuring there are no broken asset links.

It also provides a helper method to rewrite all standard Rails asset helper generated URLs to your CloudFront CDN distributions, as well as handling switching between HTTP and HTTPS.

Morning Glory was also built with SASS (Syntactically Awesome Stylesheets) in mind. If you use Sass for your stylesheets they will automatically be built before deployment to the CDN. See http://sass-lang.com/ for more information on Sass.s

h2. What it doesn't do

Morning Glory cannot configure your CloudFront distributions for you automatically. You will manually have to login to your AWS Management Console account, "https://console.aws.amazon.com/cloudfront/home":https://console.aws.amazon.com/cloudfront/home, and set up a distribution pointing to an S3 Bucket.

h2. Installation

<pre>
script/plugin install git://github.com/adamburmister/morning_glory.git
</pre>

h2. Configuration

h3. The Morning Glory configuration file, @config/morning_glory.yml@

[Being written...]

h3. The Amazon S3 authentication keys configuration file, @config/s3.yml@

This file provides the access credentials for your Amazon AWS S3 account.
You can configure keys for all your environments (production,staging,testing,etc).

<pre>
---
production:
  access_key_id: YOUR_ACCESS_KEY
  secret_access_key: YOUR_SECRET_ACCESS_KEY
staging:
  access_key_id: YOUR_ACCESS_KEY
  secret_access_key: YOUR_SECRET_ACCESS_KEY
</pre>

h3. Set up an asset_host

For each environment that you'd like to utilise the CloudFront CDN for you'll need to define the asset_host within the @config/environments/{ENVIRONMENT}.rb@ configuration file.
We recommend using the AssetHostingWithMinimumSsl plugin is used to ensure that you're switching between HTTP and HTTPS as required.

h4. Example config/environments/production.rb @asset_host@ snippet using AssetHostingWithMinimumSsl:

<pre>
config.action_controller.asset_host = AssetHostingWithMinimumSsl.new(
  "http://cdn%d.app.yoursite.com",
  "https://www.yoursite.com"
)
</pre>

h2. Dependencies

You will also require the following plugins:

h3. AWS S3

Required for uploading the assets to the Amazon Web Services S3 buckets.
See "http://amazon.rubyforge.org/":http://amazon.rubyforge.org/ for more documentation on installation.

h3. AssetHostingWithMinimumSsl (optional)

Used to deal with switching between HTTP and HTTPS asset hosts, ensuring you serve non-HTTPS traffic from the fast CDN, and secure assets from your SSL signed web server.
See "http://github.com/dhh/asset-hosting-with-minimum-ssl":http://github.com/dhh/asset-hosting-with-minimum-ssl.

h2. About the name

Perhaps not what you'd expect; a "Morning Glory":http://en.wikipedia.org/wiki/Morning_Glory_cloud is a rare cloud formation observed by glider pilots in Australia (see my side project, "YourFlightLog.com for flight-logging software for paraglider and hang-glider pilots":http://www.yourflightlog.com, from which the Morning Glory plugin was originally extracted).

Copyright (c) 2010 "@AdamBurmister":http://twitter.com/adamburmister/, released under the MIT license